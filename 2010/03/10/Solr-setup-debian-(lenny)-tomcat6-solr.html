<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebPage"> <head> <meta charset="utf-8"/> <meta itemprop="name" content="Solr setup debian (lenny) + tomcat6 + solr" /> <meta itemprop="author" content="Tarun Jangra" /> <meta itemprop="breadcrumb" content="http://tarunjangra.com" /> <meta itemprop="keywords" content="" /> <meta itemprop="description" content="Solr is an indexing engine which runs on the top of JVM. Here we are talking about solr setup on debian lenny distribution. " /> <meta name="description" content="Solr is an indexing engine which runs on the top of JVM. Here we are talking about solr setup on debian lenny distribution. " /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="twitter:creator" content="@jangratarun"/> <meta name="google-site-verification" content="LbBZQggzMfCTynN2RhklpF6XLElwBM85RK044iJnmTA" /> <meta property="twitter:account_id" content="363229840" /> <meta property="og:url" content="http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html"/> <meta property="og:site_name" content="Tarun Jangra's Blog'"/> <meta property="og:title" content="Solr setup debian (lenny) + tomcat6 + solr"/> <meta property="og:description" content="Solr is an indexing engine which runs on the top of JVM. Here we are talking about solr setup on debian lenny distribution. "/> <meta property="og:type" content="article" /> <meta property="og:locale" content="en_US" /> <meta property="fb:admins" content="1032543096808130"/> <meta name="twitter:site" content="@jangratarun"/> <meta name="twitter:creator" content="@jangratarun"/> <meta name="twitter:url" content="http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html"/> <meta property="article:author" content="https://www.facebook.com/jangra.tarun"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="tarunjangra" /> <link rel="shortcut icon" href="/favicon.ico?e0ee6b8"/> <link rel="apple-touch-icon" href="/favicon.ico?e0ee6b8"/> <link rel="alternate" type="application/rss+xml" title="RSS for tarunjangra.com" href="http://tarunjangra.com/rss.xml"/> <link rel="author" href="https://plus.google.com/u/0/+TarunJangras?rel=author" /> <link rel="publisher" href="https://plus.google.com/u/0/+TarunJangras" /> <link rel="stylesheet" href="/css/layout.css?e0ee6b8"/> <link rel="stylesheet" href="/css/icons.css?e0ee6b8"/> <link rel="canonical" href="http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html" /> <link rel="amphtml" href="http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.amp.html" /> <title>Solr setup debian (lenny) + tomcat6 + solr - Tarun Jangra </title> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="show head menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub"><span>subscribe</span></a> <a href="/about-me.html"> <img src="/images/about/tarun-jangra-200x200.jpg" class="photo" alt="photo of Tarun Jangra"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="http://www.twitter.com/jangratarun" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a> <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a> <li><a href="https://github.com/tarunjangra" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a> <li><a href="https://www.facebook.com/jangra.tarun" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a> <li><a href="https://instagram.com/tarunjangra" title="follow me in Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a> <li><a href="https://www.linkedin.com/in/tarunjangra" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a> <li><a href="https://www.youtube.com/channel/UC0ZsPdSN8ZfQBTGrpD2I7-A" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a> <li><a href="https://angel.co/tarunjangra" title="my AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a> <li><a href="mailto:blog@tarunjangra.com" title="blog@tarunjangra.com"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a> <li><a href="/contents.html" title="blog contents">all&#160;25</a></ul></nav><div id="search"> <form method="get" action="https://www.google.com/search" style="position:relative"> <input name="sitesearch" value="tarunjangra.com" type="hidden"/> <input id="search-query" class="field field-text" onfocus="$('#google').css('display', 'inline-block');" name="q" placeholder="Search" autocomplete="off"/> <span class="desktop-only"> <input type="image" src="/images/google-search-icon.svg" id="google" title="search via Google" style="height:2.4em;display:none;position:absolute;top:.3em;margin-left:1em;" alt="search via Google"/> </span> </form><div id="search-results" style="display: none;"><div class="entries"></div></div></div><div class="hot"><ul> <li> Join my new chatroom on Gitter to discuss about cloud computing in realtime: <a href="https://gitter.im/tarunjangra/codepipe">tarunjangra/codepipe</a>!</ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/><p class="printable"> <code>http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html</code><h1 itemprop="name">Solr setup debian (lenny) + tomcat6 + solr</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2010-03-10T00:00:00+00:00"> 10 March 2010 </time> <li class="printable">Tarun Jangra <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html#disqus_thread" itemprop="discussionUrl">comments</a></ul><p class="unprintable"><a href='/tag/SOLR.html' class='tag notranslate'>SOLR</a> <a href='/tag/Indexing Engine.html' class='tag notranslate'>Indexing Engine</a> <a href='/tag/Debian.html' class='tag notranslate'>Debian</a> <a href='/tag/tomcat6.html' class='tag notranslate'>tomcat6</a> <a href='/tag/JDK.html' class='tag notranslate'>JDK</a><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html&amp;text=Solr+setup+debian+%28lenny%29+%2B+tomcat6+%2B+solr" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html&amp;title=Solr+setup+debian+%28lenny%29+%2B+tomcat6+%2B+solr" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html%3F2010-10&amp;title=Solr+setup+debian+%28lenny%29+%2B+tomcat6+%2B+solr" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://tarunjangra.com/2010/03/10/Solr-setup-debian-(lenny)-tomcat6-solr.html%3F2010-10&amp;t=Solr+setup+debian+%28lenny%29+%2B+tomcat6+%2B+solr" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div></header> <main> <article class="main" itemprop="articleBody"><p>I am working on a task to set solr enterprise search for elgg. I am as digging as getting surprised with this amazing search utility. First i am going to explain how to install solr with tomcat6.x. <h3 id="requirements">Requirements:</h3> <ol> <li>JDK, JRE (OpenJDK, SunJDK) <li>Tomcat6.x <li>Latest solr </ol> <h3 id="installation-jdk-jre">Installation JDK,JRE:</h3><p>Well i used to setup openjdk and openjre on my lenny server. It is quite easy to use debian package manager. You can install is using <figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get install openjdk-6-jre, openjdk-6-jdk</code></pre></figure><p>And i was installed with all jdk and jre environment. You may need to setup JAVA_HOME environment variable if you do not wish to install JDK at default location. You can do this in “.profile” located under your home or “/etc/profile” to make it enable for all available users. <h3 id="download-tomcate6-x">Download tomcate6.x</h3><p>I downloaded tomcat binary “apache tomcat 6.0.24” and untar it at “/usr/local/”. You can choose any of your selected location. So my location of all tomcat binaries was “/usr/local/tomcat”. That’s it, you have done with tomcat installation. You can start tomcat as: <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /usr/local/tomcat/bin/
./startup.sh</code></pre></figure><p>Now put localhost:8080 in your browser. You will see the response of tomcat server. Now next step is to install solr as a tomcat application. It needs some configurations. <h3 id="installation-amp-configuration-of-solr">Installation &amp; configuration of Solr</h3><p>Download apache solr and unzip it at any accessible location. Now create some directories under tomcat as <figure class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir /usr/local/tomcat/data/solr/elgg/conf -p
mkdir /usr/local/tomcat/data/solr/elgg/data -p</code></pre></figure><p>Now we need to copy “apache-solr-1.4.0.war” file for tomcat deployment. Go to the directory where you unzip the solr file. i found that file as “/apache-solr-1.4.0/dist/apache-solr-1.4.0.war”. <figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp apache-solr-1.4.0/dist/apache-solr-1.4.0.war /usr/local/tomcat/data/solr</code></pre></figure><p>Now, in /usr/local/tomcat/conf/Catalina/localhost we need to create and save a files which will be read the next time you start Tomcat, and properly deploy Solr. Use a text editor of your choice and create a files name “solrelgg.xml” in the /usr/local/tomcat/conf//Catalina/localhost subdirectory. Put the contents as follow <figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Context</span> <span class="na">docBase=</span><span class="s">”/usr/local/tomcat/data/solr/apache-solr-1.4.0.war”</span> 
<span class="na">debug=</span><span class="s">”0″</span> <span class="na">crossContext=</span><span class="s">”true”</span><span class="nt">&gt;</span>
<span class="nt">&lt;Environment</span> <span class="na">name=</span><span class="s">”solr/home”</span> <span class="na">type=</span><span class="s">”java.lang.String”</span> 
<span class="na">value=</span><span class="s">”/usr/local/tomcat/data/solr/elgg”</span> <span class="na">override=</span><span class="s">”true”</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Context&gt;</span></code></pre></figure><p>Now go to “apache-solr-1.4.0/example/solr/conf” and copy all default configuration files in to our configured configuration directory under tomcat. <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd </span>apache-solr-1.4.0/example/solr/conf
cp * -R /usr/local/tomcat/data/solr/elgg/conf
<span class="nb">cd</span> /usr/local/tomcat/data/solr/elgg/conf</code></pre></figure><p>Now edit “solrconfig.xml” and find “solr.data.dir” parameter. Change it’s value to new data directory. I gave relative path like “ ../data” So now it was pointing to new data directory “/usr/local/tomcat/data/solr/elgg/data”. Well this edit is an optional step. you can skip this. In that case, data directory will be created at default location according to the default value of “solr.data.dir”. Now start tomcat server using “/usr/local/tomcat/bin/startup.sh” and browse localhost:8080/solrelgg<p>It should show you “Welcome to Solr!” message with “Solr Admin” link. I hope, it would work for you. Now elgg integration is just the matter of pushing new entities at create entity hooks and all other crud operations. </article> </main> 
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2014/07/11/elasticSearch-restore-failed-when-s3-gateway-activated.html" data-score="0.9996629641915137">ElasticSearch restore failed when s3-gateway is activated</a>
        </li>
      
        <li>
          <a href="/2012/12/29/how-to-install-godaddy-ssl-on-ELB.html" data-score="0.49888402793568154">How to install go-daddy ssl certificate on amazon load balancer</a>
        </li>
      
        <li>
          <a href="/2008/12/31/Elgg-Open-Source-Social-Networking-Engine.html" data-score="0.21902660610220961">Elgg - Open Source Social Networking Engine</a>
        </li>
      
        <li>
          <a href="/2008/10/17/Global-setup-of-doctrine-plugin-for-symfony1-1.html" data-score="0.1854896409168075">Global setup of doctrine plugin for symfony1.1.</a>
        </li>
      
        <li>
          <a href="/2009/01/01/Simple-steps-to-setup-symfony-and-svn.html" data-score="0.17798717142358422">Simple steps to setup symfony and svn</a>
        </li>
      
    </ul>
  </div>

<div class="teamed-banner"> <a href="http://www.abcdevops.com"> <img src="/images/banners/abcdevops.png" alt="banner"/> </a></div></div><div class="disqus" role="complementary"><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//wwwtarunjangracom.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemprop="author">Tarun Jangra</span>, 2016 </footer></div></section> <script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?e0ee6b8"></script> <script>var disqus_shortname = 'wwwtarunjangracom';</script> <script id="dsq-count-scr" src="//wwwtarunjangracom.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-783273-5', 'auto'); ga('send', 'pageview'); </script> <script language="javascript" type="text/javascript"> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script language="javascript1.1" type="text/javascript"> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script language="javascript1.2" type="text/javascript"> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script language="javascript" type="text/javascript"> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script>
