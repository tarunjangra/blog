<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebPage"> <head> <meta charset="utf-8"/> <meta itemprop="name" content="Round-robin at application level to Balance MySQL Database Load" /> <meta itemprop="author" content="Tarun Jangra" /> <meta itemprop="breadcrumb" content="http://tarunjangra.com" /> <meta itemprop="keywords" content="" /> <meta itemprop="description" content="My First Post on my new blog. where i am just introducing my self and looking forward to share my ideas and working experiences. " /> <meta name="description" content="My First Post on my new blog. where i am just introducing my self and looking forward to share my ideas and working experiences. " /> <meta name="keywords" content="" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="twitter:creator" content="@jangratarun"/> <meta name="google-site-verification" content="LbBZQggzMfCTynN2RhklpF6XLElwBM85RK044iJnmTA" /> <meta property="twitter:account_id" content="363229840" /> <meta property="og:url" content="http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html"/> <meta property="og:site_name" content="Tarun Jangra's Blog'"/> <meta property="og:title" content="Round-robin at application level to Balance MySQL Database Load"/> <meta property="og:description" content="My First Post on my new blog. where i am just introducing my self and looking forward to share my ideas and working experiences. "/> <meta property="og:type" content="article" /> <meta property="og:locale" content="en_US" /> <meta property="fb:admins" content="1032543096808130"/> <meta name="twitter:site" content="@jangratarun"/> <meta name="twitter:creator" content="@jangratarun"/> <meta name="twitter:url" content="http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html"/> <meta property="article:author" content="https://www.facebook.com/jangra.tarun"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="tarunjangra" /> <link rel="shortcut icon" href="/favicon.ico?e19bdad"/> <link rel="apple-touch-icon" href="/favicon.ico?e19bdad"/> <link rel="alternate" type="application/rss+xml" title="RSS for tarunjangra.com" href="http://tarunjangra.com/rss.xml"/> <link rel="author" href="https://plus.google.com/u/0/+TarunJangras?rel=author" /> <link rel="publisher" href="https://plus.google.com/u/0/+TarunJangras" /> <link rel="stylesheet" href="/css/layout.css?e19bdad"/> <link rel="stylesheet" href="/css/icons.css?e19bdad"/> <link rel="canonical" href="http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html" /> <link rel="amphtml" href="http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.amp.html" /> <title>Round-robin at application level to Balance MySQL Database Load - Tarun Jangra </title> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="show head menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub"><span>subscribe</span></a> <a href="/about-me.html"> <img src="/images/about/tarun-jangra-200x200.jpg" class="photo" alt="photo of Tarun Jangra"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="http://www.twitter.com/jangratarun" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a> <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a> <li><a href="https://github.com/tarunjangra" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a> <li><a href="https://www.facebook.com/jangra.tarun" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a> <li><a href="https://instagram.com/tarunjangra" title="follow me in Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a> <li><a href="https://www.linkedin.com/in/tarunjangra" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a> <li><a href="https://www.youtube.com/channel/UC0ZsPdSN8ZfQBTGrpD2I7-A" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a> <li><a href="https://angel.co/tarunjangra" title="my AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a> <li><a href="mailto:blog@tarunjangra.com" title="blog@tarunjangra.com"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a> <li><a href="/contents.html" title="blog contents">all&#160;25</a></ul></nav><div id="search"> <form method="get" action="https://www.google.com/search" style="position:relative"> <input name="sitesearch" value="tarunjangra.com" type="hidden"/> <input id="search-query" class="field field-text" onfocus="$('#google').css('display', 'inline-block');" name="q" placeholder="Search" autocomplete="off"/> <span class="desktop-only"> <input type="image" src="/images/google-search-icon.svg" id="google" title="search via Google" style="height:2.4em;display:none;position:absolute;top:.3em;margin-left:1em;" alt="search via Google"/> </span> </form><div id="search-results" style="display: none;"><div class="entries"></div></div></div><div class="hot"><ul> <li> Join my new chatroom on Gitter to discuss about cloud computing in realtime: <a href="https://gitter.im/tarunjangra/codepipe">tarunjangra/codepipe</a>!</ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/><p class="printable"> <code>http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html</code><h1 itemprop="name">Round-robin at application level to Balance MySQL Database Load</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2011-06-10T00:00:00+00:00"> 10 June 2011 </time> <li class='unprintable desktop-only'><a href='https://github.com/tarunjangra/blog/commits/master/_posts/2011/jun/2011-06-10-Round-robin-at-application-level-to-Balance-MySQL-Database-Load.md'>modified</a> on <time itemprop='dateModified' datetime='2016-12-11T23:34:12+0530'>11 December 2016</time> <li class="printable">Tarun Jangra <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html#disqus_thread" itemprop="discussionUrl">comments</a></ul><p class="unprintable"><a href='/tag/RDBMD.html' class='tag notranslate'>RDBMD</a> <a href='/tag/MySQL.html' class='tag notranslate'>MySQL</a> <a href='/tag/Round robin.html' class='tag notranslate'>Round robin</a> <a href='/tag/AWS.html' class='tag notranslate'>AWS</a> <a href='/tag/RDS.html' class='tag notranslate'>RDS</a><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html&amp;text=Round-robin+at+application+level+to+Balance+MySQL+Database+Load" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html&amp;title=Round-robin+at+application+level+to+Balance+MySQL+Database+Load" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html%3F2011-23&amp;title=Round-robin+at+application+level+to+Balance+MySQL+Database+Load" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://tarunjangra.com/2011/06/10/Round-robin-at-application-level-to-Balance-MySQL-Database-Load.html%3F2011-23&amp;t=Round-robin+at+application+level+to+Balance+MySQL+Database+Load" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div></header> <main> <article class="main" itemprop="articleBody"><p>Round robin technique facilitates you to distribute your read queries on number of available resources even if all servers are located at different locations. Huge traffic sites like Facebook has to has such techniques working at the background to serve as fast as possible.<p>I would like to discuss one of my personal implementation experience for such a large potential social networking site. Cloud computing is really help full but it also needs logical approach at programming level.<p><img src="http://tarunjangra.com/images/assets/mysql-57-clustering-the-developer-perspective-60-638.jpg" alt="MySQL Round-Robin"> <h3 id="approach-1-six-servers-architecture-on-amazon-cloud">Approach 1: Six servers architecture on amazon cloud.</h3><p>WOW! I had implemented 1 load balancer, 1 mysql master db, 1 mysql slave db and 3 application server. Such an architecture<br> can handle huge traffic. Since there is a separate application server layer where we can add more application servers anytime we need. So user requests get balanced on 3 application servers and they get response. But in my application i had one more problem. When user click on single link it executes 100+ SQLs because there is a framework overhead and some intentional queries. Hmmmm, So MySql load is never balanced with this technique and it has to be. Because 1 request is triggering 100+ SQLs. So i drill down to find out the solution and decided to separate sql reads and writes. Ok so with this, i get an opportunity to divide separate Writes of MySQL db and initiated one mysql slave server. <h3 id="does-this-really-get-me-at-the-end-of-performance-level">Does this really get me at the end of performance level?</h3><p>No. Because we use read queires more frequently then write. Son in 100+ SQLs i have lesser database writes. So My write server is still have idle resources. <h3 id="here-is-where-round-robin-comes-in">Here is where Round Robin comes in.</h3><p>If i could be able to develop a logic which distributes my 100+ SQLs to any number of replicated instances available. That could really work for me. Say i have 5 read servers for 100+ SQL. Than i can distribute around 20 SQL per server per request. And as we increase number of read server. System can adjust it self to distribute (SQL queries) / (Number of servers) (Qn / Sn). In this way, all of my server will work for every SQL requested from the system. And I could get maximum performance from servers. Because there is no use if we have 1000 Servers and 1 server is responding for 1 complete request. Because in this case 999 servers are free and which is wastage of Money. So i implemented that in My PHP application and that really makes sense to be available on Cloud to use maximum resources. </article> </main> 
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2014/07/11/elasticSearch-restore-failed-when-s3-gateway-activated.html" data-score="0.9006556631564072">ElasticSearch restore failed when s3-gateway is activated</a>
        </li>
      
        <li>
          <a href="/2012/12/29/how-to-install-godaddy-ssl-on-ELB.html" data-score="0.5055723060334402">How to install go-daddy ssl certificate on amazon load balancer</a>
        </li>
      
        <li>
          <a href="/2016/12/19/serving-authenticated-static-content.html" data-score="0.3829291434218571">Serving Authenticated Static Content was pretty expensive before today</a>
        </li>
      
        <li>
          <a href="/2016/03/02/amazon-ec2.html" data-score="0.36859000884049625">Amazon Elastic Cloud Computing (EC2)</a>
        </li>
      
        <li>
          <a href="/2008/12/31/Elgg-Open-Source-Social-Networking-Engine.html" data-score="0.25665521126536467">Elgg - Open Source Social Networking Engine</a>
        </li>
      
    </ul>
  </div>

<div class="teamed-banner"> <a href="http://www.abcdevops.com"> <img src="/images/banners/abcdevops.png" alt="banner"/> </a></div></div><div class="disqus" role="complementary"><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//wwwtarunjangracom.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemprop="author">Tarun Jangra</span>, 2016 </footer></div></section> <script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?e19bdad"></script> <script>var disqus_shortname = 'wwwtarunjangracom';</script> <script id="dsq-count-scr" src="//wwwtarunjangracom.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-783273-5', 'auto'); ga('send', 'pageview'); </script> <script language="javascript" type="text/javascript"> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script language="javascript1.1" type="text/javascript"> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script language="javascript1.2" type="text/javascript"> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script language="javascript" type="text/javascript"> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script>
